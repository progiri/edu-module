(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var c=n(1),o=n.n(c),s=n(7),i=n.n(s),a=(n(13),n(4)),d=n(8),r=n(3),l=(n(14),n(0)),j="http://127.0.0.1:8000";var u=function(t){if(!document.cookie)return null;var e=document.cookie.split(";").map((function(t){return t.trim()})).filter((function(e){return e.startsWith(t+"=")}));return 0===e.length?null:decodeURIComponent(e[0].split("=")[1])}("csrftoken");function h(){var t=Object(c.useState)([]),e=Object(r.a)(t,2),n=e[0],o=e[1];Object(c.useEffect)((function(){fetch("".concat(j,"/todos/")).then((function(t){return t.json()})).then((function(t){return o(t.todo)}))}),[]);return Object(l.jsx)("div",{className:"app",children:Object(l.jsxs)("div",{className:"todo",children:[Object(l.jsx)("h1",{className:"todo__title",children:"TODO App"}),Object(l.jsx)("h2",{className:"todo__sub-title",children:"Do it now."}),Object(l.jsx)(b,{todoList:n,setTodoList:o}),Object(l.jsxs)("table",{className:"todo__todo-table",children:[Object(l.jsx)("thead",{className:"todo-table__header",children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"#"}),Object(l.jsx)("th",{children:"Task Name"}),Object(l.jsx)("th",{children:"Status"}),Object(l.jsx)("th",{children:"Remove"})]})}),Object(l.jsx)("tbody",{className:"todo-table__content",children:n.map((function(t){return Object(l.jsxs)("tr",{className:"content__item",children:[Object(l.jsx)("td",{children:t.id}),Object(l.jsx)("td",{children:t.title}),Object(l.jsx)("td",{children:Object(l.jsx)(O,{initStatusId:t.status,todoId:t.id,setTodoList:o})}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{className:"item__remove-btn",type:"button",onClick:function(){return e=t.id,void fetch("".concat(j,"/todos/"),{credentials:"include",method:"DELETE",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":u},body:JSON.stringify({id:e})}).then((function(t){fetch("".concat(j,"/todos/")).then((function(t){return t.json()})).then((function(t){return o(t.todo)})),alert("Deleted!")}));var e},children:"Remove"})})]},t.id)}))})]}),0===n.length?Object(l.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"#eee"},children:"Empty"}):null]})})}function b(t){var e=t.todoList,n=t.setTodoList,o=Object(c.useState)(!1),s=Object(r.a)(o,2),i=s[0],h=s[1],b=Object(c.useState)({title:"",status:"1"}),O=Object(r.a)(b,2),p=O[0],m=O[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"add-task",onClick:function(){return h(!i)},children:"Add Task"}),Object(l.jsxs)("div",{className:"add-task__form",style:{display:i?"flex":"none"},children:[Object(l.jsxs)("p",{children:["Task name:"," ",Object(l.jsx)("input",{type:"text",value:p.title,onChange:function(t){var e=t.target.value;return m(Object(a.a)(Object(a.a)({},p),{},{title:e}))}})]}),Object(l.jsxs)("p",{children:["Status:"," ",Object(l.jsxs)("select",{value:p.status,onChange:function(t){var e=t.target.value;return m(Object(a.a)(Object(a.a)({},p),{},{status:e}))},children:[Object(l.jsx)("option",{value:"1",children:"ToDo"}),Object(l.jsx)("option",{value:"2",children:"InProgress"}),Object(l.jsx)("option",{value:"3",children:"Complete"})]})]}),Object(l.jsx)("hr",{}),Object(l.jsx)("button",{className:"create-btn",onClick:function(){fetch("".concat(j,"/todos/"),{credentials:"include",method:"POST",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":u},body:JSON.stringify(p)}).then((function(t){return t.json()})).then((function(t){-1===t.code?alert(t.todo):(n([].concat(Object(d.a)(e),[{id:t.todo.id,title:t.todo.title,status:t.todo.status}])),alert("Success created!"))}))},children:"Create"}),Object(l.jsx)("button",{className:"cancel-btn",onClick:function(){return h(!1)},children:"Cancel"})]})]})}function O(t){var e=t.initStatusId,n=t.todoId,o=(t.setTodoList,[{id:1,title:"ToDo",color:"blue"},{id:2,title:"InProgress",color:"orange"},{id:3,title:"Complete",color:"green"}]),s=Object(c.useState)(e-1),i=Object(r.a)(s,2),a=i[0],d=i[1];return Object(l.jsx)("div",{className:"status",style:{color:o[a].color},onClick:function(){a===o.length-1?fetch("".concat(j,"/todos/"),{credentials:"include",method:"PATCH",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":u},body:JSON.stringify({id:n,status:o[0].id})}).then((function(t){return d(0)})):fetch("".concat(j,"/todos/"),{credentials:"include",method:"PATCH",mode:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":u},body:JSON.stringify({id:n,status:o[a+1].id})}).then((function(t){return d(a+1)}))},children:o[a].title})}i.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(h,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.51e61c70.chunk.js.map